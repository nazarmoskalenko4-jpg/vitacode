{% extends "base.html" %}

{% block content %}
<style>
  .vc-page-wide {
    max-width: 1200px;
    margin: 0 auto;
  }
  .vc-card-table {
    background: #ffffff;
    border-radius: 8px;
    box-shadow: 0 1px 3px rgba(0,0,0,0.08);
    overflow: hidden; 
  }
  .table {
    margin-bottom: 0; 
  }
  .table th {
    background-color: #f8f9fa;
    border-bottom: 2px solid #e9ecef;
    font-weight: 600;
    color: #495057;
    padding: 16px;
  }
  .table td {
    padding: 16px;
    vertical-align: middle;
    border-bottom: 1px solid #e9ecef;
  }
  .vc-badge {
    padding: 6px 10px;
    border-radius: 20px;
    font-size: 0.85em;
    font-weight: 500;
  }
  .badge-lose { background-color: #fff3cd; color: #856404; }
  .badge-gain { background-color: #f8d7da; color: #721c24; }
  .badge-maintain { background-color: #d1ecf1; color: #0c5460; }
  
  .btn-icon {
    display: inline-flex;
    align-items: center;
    gap: 6px;
  }
</style>

<div class="vc-page-wide">
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h1>üìÇ –°–ø–∏—Å–æ–∫ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤</h1>
    <a href="/ui/plan" class="btn btn-primary btn-icon btn-lg">
      <span>+</span> –°—Ç–≤–æ—Ä–∏—Ç–∏ –Ω–æ–≤–∏–π
    </a>
  </div>

  <div class="vc-card-table">
    <div class="table-responsive">
      <table class="table table-hover">
        <thead>
          <tr>
            <th>ID</th>
            <th>–ö–æ—Ä–∏—Å—Ç—É–≤–∞—á</th>
            <th>–ü–∞—Ä–∞–º–µ—Ç—Ä–∏</th>
            <th>–¶—ñ–ª—å</th>
            <th>–ë—é–¥–∂–µ—Ç</th>
            <th class="text-end">–î—ñ—ó</th>
          </tr>
        </thead>
        <tbody>
          {% for p in profiles %}
          <tr>
            <td class="fw-bold text-secondary">#{{ p.id }}</td>
            <td>
              <div class="fw-bold">
                {% if p.sex == 'male' %}–ß–æ–ª–æ–≤—ñ–∫{% else %}–ñ—ñ–Ω–∫–∞{% endif %}
              </div>
              <div class="text-muted small">{{ p.age }} —Ä–æ–∫—ñ–≤</div>
            </td>
            <td>
              <div>{{ p.height_cm|round|int }} —Å–º</div>
              <div class="text-muted small">{{ p.weight_kg|round|int }} –∫–≥</div>
            </td>
            <td>
              {% if p.goal == 'lose' %}
                <span class="vc-badge badge-lose">–°—Ö—É–¥–Ω–µ–Ω–Ω—è</span>
              {% elif p.goal == 'gain' %}
                <span class="vc-badge badge-gain">–ù–∞–±—ñ—Ä –º–∞—Å–∏</span>
              {% else %}
                <span class="vc-badge badge-maintain">–£—Ç—Ä–∏–º–∞–Ω–Ω—è</span>
              {% endif %}
            </td>
            <td class="fw-bold text-success">{{ p.budget_per_day }} –≥—Ä–Ω</td>
            <td class="text-end">
              <form method="post" action="/ui/profile/delete/{{ p.id }}?origin=list" 
                    onsubmit="return confirm('–í–∏ –≤–ø–µ–≤–Ω–µ–Ω—ñ, —â–æ —Ö–æ—á–µ—Ç–µ –≤–∏–¥–∞–ª–∏—Ç–∏ –ø—Ä–æ—Ñ—ñ–ª—å #{{ p.id }}?');"
                    style="display: inline-block;">
                <button type="submit" class="btn btn-outline-danger btn-sm btn-icon">
                  üóë –í–∏–¥–∞–ª–∏—Ç–∏
                </button>
              </form>
            </td>
          </tr>
          {% else %}
          <tr>
            <td colspan="6" class="text-center py-5 text-muted">
              –°–ø–∏—Å–æ–∫ –ø–æ—Ä–æ–∂–Ω—ñ–π. –°—Ç–≤–æ—Ä—ñ—Ç—å –ø–µ—Ä—à–∏–π –ø–ª–∞–Ω!
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>
</div>
{% endblock %}